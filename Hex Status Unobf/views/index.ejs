<!DOCTYPE html>
<html>
<head>
    <title><%= config.app.name %></title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/main.css">

</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1><%= config.app.name %></h1>
            <div class="last-updated">Last updated: <span id="update-time"></span></div>
        </div>

        <div class="overview-grid">
            <div class="overview-card">
                <h3>üìä Total Services</h3>
                <div class="value" id="total-services"><%= stats.totalServices %></div>
            </div>
            <div class="overview-card">
                <h3>‚úÖ Services Up</h3>
                <div class="value" id="services-up"><%= stats.servicesUp %></div>
            </div>
            <div class="overview-card">
                <h3>‚ùå Services Down</h3>
                <div class="value" id="services-down"><%= stats.servicesDown %></div>
            </div>
            <div class="overview-card">
                <h3>‚ö° Average Response</h3>
                <div class="value" id="average-ping"><%= stats.averagePing %> ms</div>
            </div>
        </div>
        

        <div class="services-grid">
            <% services.forEach(service => { 
                const data = serviceData.get(service.name);
            %>
                <div class="service-card" id="<%= service.name %>-card">
                    <div class="service-header">
                        <div class="service-title">
                            <div class="status-indicators">
                                <span class="status-dot <%= data.status === 'up' ? 'online active' : 'online' %>"></span>
                                <span class="status-dot <%= data.status === 'down' ? 'offline active' : 'offline' %>"></span>
                            </div>
                            <h2><%= service.name %></h2>
                        </div>
                        <span class="category-tag"><%= service.category %></span>
                    </div>
                    <div class="metrics-grid">
                        <div class="metric">
                            <div class="metric-label">Response Time</div>
                            <div class="metric-value" id="<%= service.name %>-ping">
                                <%= data.ping[data.ping.length - 1] || 'N/A' %> ms
                            </div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Health Score</div>
                            <div class="metric-value" id="<%= service.name %>-health">
                                <%= data.healthScore %>%
                            </div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Uptime</div>
                            <div class="metric-value" id="<%= service.name %>-uptime">
                                <%= data.uptime %>%
                            </div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Last Check</div>
                            <div class="metric-value" id="<%= service.name %>-lastcheck">
                                <%= moment(data.lastCheck).format('HH:mm:ss') %>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="<%= service.name %>-chart"></canvas>
                    </div>
                </div>
            <% }); %>
        </div>
    </div>
    <footer class="dashboard-footer">
        <div class="footer-content">
            <div class="copyright">¬© 2023 - <%= new Date().getFullYear() %> <%= config.footer.copyright %></div>
            <div class="version">v<%= version %></div>
        </div>
    </footer>
    <script src="/js/index.js"></script>
</body>
</html>
